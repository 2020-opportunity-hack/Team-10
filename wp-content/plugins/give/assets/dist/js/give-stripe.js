!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=498)}({10:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}e.exports=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}},498:function(e,t,r){e.exports=r(887)},8:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},887:function(e,t,r){"use strict";r.r(t);var a=r(8),n=r.n(a),i=r(10),l=r.n(i),o=function(){function e(t){n()(this,e),t&&(this.formElement=t,this.publishableKey=t.getAttribute("data-publishable-key"),this.accountId=t.getAttribute("data-account")?t.getAttribute("data-account"):"",this.idPrefix=t.getAttribute("data-id")?t.getAttribute("data-id"):"",this.locale=give_stripe_vars.preferred_locale,this.fieldsFormat=give_stripe_vars.cc_fields_format,this.isMounted=!1,this.fontStyles=[],0!==Object.keys(give_stripe_vars.element_font_styles).length&&this.fontStyles.push(give_stripe_vars.element_font_styles))}return l()(e,[{key:"setupStripeElement",value:function(){var e={};return 0!==this.accountId.trim().length&&(e={stripeAccount:this.accountId}),Stripe(this.publishableKey,e)}},{key:"getElements",value:function(e){var t={locale:this.locale};return this.fontStyles.length>0&&(t={fonts:this.fontStyles,locale:this.locale}),e.elements(t)}},{key:"createElement",value:function(e,t){var r=[],a=this.getElementsToMountOn(),n={style:this.getElementStyles(),classes:this.getElementClasses()};return a.forEach((function(t,a){"card"===t[0]?n.hidePostalCode=!!give_stripe_vars.checkout_address:"cardNumber"===t[0]?n.placeholder=give_stripe_vars.card_number_placeholder_text:"cardCvc"===t[0]?n.placeholder=give_stripe_vars.card_cvc_placeholder_text:delete n.placeholder,r.push(e.create(t[0],n))})),"cardNumber"===a[0][0]&&r[0].addEventListener("change",(function(e){var r="diners"===e.brand?"dinersclub":e.brand;t.querySelector(".card-type").className="card-type "+r})),r}},{key:"destroyElement",value:function(e){e.forEach((function(e,t){e.destroy()}))}},{key:"getElementStyles",value:function(){return{base:give_stripe_vars.element_base_styles,complete:give_stripe_vars.element_complete_styles,empty:give_stripe_vars.element_empty_styles,invalid:give_stripe_vars.element_invalid_styles}}},{key:"getElementClasses",value:function(){return{focus:"focus",empty:"empty",invalid:"invalid"}}},{key:"getElementsToMountOn",value:function(){var e={cardNumber:"#give-card-number-field-".concat(this.idPrefix),cardCvc:"#give-card-cvc-field-".concat(this.idPrefix),cardExpiry:"#give-card-expiration-field-".concat(this.idPrefix)};return"single"===this.fieldsFormat&&(e={card:"#give-stripe-single-cc-fields-".concat(this.idPrefix)}),Object.entries(e)}},{key:"mountElement",value:function(e){var t=this.getElementsToMountOn();Array.from(e).forEach((function(e,r){e.mount(t[r][1])}))}},{key:"unMountElement",value:function(e){var t=this.getElementsToMountOn();Array.from(e).forEach((function(e,r){e.unmount(t[r][1])}))}},{key:"createPaymentMethod",value:function(e,t,r){var a={};if(a.name=e.querySelector('input[name="card_name"]').value,!give_stripe_vars.stripe_card_update){var n=e.querySelector('input[name="give_first"]').value,i=e.querySelector('input[name="give_last"]').value,l=e.querySelector('input[name="give_email"]').value;a.name="".concat(n," ").concat(i),a.email=l,e.querySelector("[id^=give-purchase-button]").setAttribute("disabled","disabled")}if(give_stripe_vars.checkout_address&&!give_stripe_vars.stripe_card_update){var o=e.querySelector(".card-address").value,u=e.querySelector(".card-address-2").value,c=e.querySelector(".card-city").value,s=e.querySelector(".card_state").value,d=e.querySelector(".card-zip").value,v=e.querySelector(".billing-country").value;a.address={line1:o||"",line2:u||"",city:c||"",state:s||"",postal_code:d||"",country:v||""}}t.createPaymentMethod({type:"card",card:r[0],billing_details:a}).then((function(t){if(t.error){var r=jQuery(e),a='<div class="give_errors"><p class="give_error">'.concat(t.error.message,"</p></div>"),n=e.getAttribute("data-id");return Give.form.fn.resetDonationButton(r),void(e.querySelector("#give-stripe-payment-errors-".concat(n)).innerHTML=a)}e.querySelector('input[name="give_stripe_payment_method"]').value=t.paymentMethod.id,e.submit()}))}},{key:"triggerStripeModal",value:function(e,t,r,a){var n=e.querySelector('input[name="give-form-id-prefix"]'),i=e.querySelector("#give-stripe-checkout-modal-donate-button-".concat(n.value)),l=e.querySelector('input[name="card_name"]'),o={};a.forEach((function(e){o.cardName=!1,e.addEventListener("ready",(function(e){o[e.elementType]=!1,o.cardName="card"===e.elementType})),e.addEventListener("change",(function(e){o[e.elementType]=e.complete,Object.values(o).every((function(e){return!0===e}))?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled")}))})),null!==l&&l.addEventListener("keyup",(function(e){o.cardName=""!==e.target.value,Object.values(o).every((function(e){return!0===e}))?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled")})),null!==i&&i.addEventListener("click",(function(n){var l=n.target,o=l.nextElementSibling;i.getAttribute("data-is_legacy_form")?(l.value=give_global_vars.purchase_loading,o.style.display="inline-block"):(l.value="",o.classList.add("sequoia-loader"),o.classList.add("spinning"),o.classList.remove("give-loading-animation")),t.createPaymentMethod(e,r,a),n.preventDefault()}))}}]),e}();document.addEventListener("DOMContentLoaded",(function(e){Array.from(document.querySelectorAll(".give-form-wrap")).forEach((function(e){var t=e.querySelector(".give-form");if(null!==t&&t.getAttribute("data-publishable-key")){var r=give_stripe_vars.hasOwnProperty("stripe_card_update")&&parseInt(give_stripe_vars.stripe_card_update),a=t.querySelector('input[name="give-form-id-prefix"]'),n=new o(t),i=n.setupStripeElement(),l=n.getElements(i),u=n.createElement(l,t),c=Give.form.fn.getInfo("stripe-checkout-type",t);d(!1),document.addEventListener("give_gateway_loaded",d),t.onsubmit=function(e){var l=s(),o=l.selectedGatewayId,c=l.isStripeModalCheckoutGateway;if((r||"stripe"===o)&&(n.createPaymentMethod(t,i,u),e.preventDefault()),c){var d=t.querySelector(".give-stripe-checkout-modal"),v=d.querySelector(".give-stripe-checkout-donation-amount"),p=d.querySelector(".give-stripe-checkout-donor-email"),f=t.querySelector(".give-final-total-amount").textContent,m=t.querySelector('input[name="give_email"]').value,y=t.querySelector('input[name="give_validate_stripe_payment_fields"]');d.classList.add("give-stripe-checkout-show-modal"),null!==v&&(v.innerHTML=f),null!==p&&(p.innerHTML=m),y.setAttribute("value","1");var g=t.querySelector(".give-stripe-checkout-modal-close");null!==g&&g.addEventListener("click",(function(e){t.querySelector("#give-stripe-checkout-modal-".concat(a.value)).classList.remove("give-stripe-checkout-show-modal");var r=t.querySelector(".give-submit");null!==r&&(r.value=r.getAttribute("data-before-validation-label"),r.nextElementSibling.style.display="none",r.removeAttribute("disabled"),t.querySelector('input[name="give_validate_stripe_payment_fields"]').setAttribute("value","0")),e.preventDefault()})),e.preventDefault()}}}function s(){var e=t.querySelector('input[name="give-gateway"]'),r=e?e.value:"",a="modal"===c;return{formGateway:e,selectedGatewayId:r,isCheckoutTypeModal:a,isStripeModalCheckoutGateway:e&&"stripe_checkout"===r&&a}}function d(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=s(),a=r.selectedGatewayId,l=r.isStripeModalCheckoutGateway;"stripe"===a||l?n.mountElement(u):e&&n.unMountElement(u),l&&n.triggerStripeModal(t,n,i,u)}}))}))}});